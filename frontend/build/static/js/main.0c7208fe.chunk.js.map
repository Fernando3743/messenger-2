{"version":3,"sources":["components/Blank.js","components/Message.js","redux/actionTypes.js","components/ChatScreen.js","redux/actionCreators.js","util/cookies.js","components/Chat.js","components/Sidebar.js","App.js","images/messenger.png","Login.js","Register.js","Main.js","redux/reducers.js","redux/store.js","index.js"],"names":["Blank","className","Message","user","sender","message","id","ADD_CHATS","ADD_USER","OPEN_CHAT","CLOSE_CHAT","ADD_MESSAGE","NEW_CHAT","ChatScreen","chatID","messages","opened","user2","messageRef","useRef","useState","wsclient","setWsClient","dispatch","useDispatch","useEffect","client","WebSocket","window","location","host","removeEventListener","onmessage","receiveMessage","event","console","log","data","JSON","parse","type","payload","addMessage","sendMessage","current","value","send","stringify","onClick","email","length","map","ref","onKeyDown","e","keyCode","placeholder","getCookie","name","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent","Chat","username","image","openChat","src","alt","Sidebar","chats","openedChat","handleAddChat","a","prompt","csrftoken","request","Request","headers","fetch","method","body","then","res","json","response","chat","error","alert","href","Object","keys","user1","App","useSelector","state","Boolean","filter","open","process","addChats","addUser","Login","history","useHistory","setMessage","usernameRef","passwordRef","handleFormSubmit","preventDefault","password","redirect","redirected","push","logo","action","onSubmit","htmlFor","autoFocus","Register","emailRef","imageRef","confirmationRef","confirmation","Main","exact","path","component","reducer","combineReducers","tempChats","oudatedChat","updatedChat","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0c7208fe.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { ChatAlt2Icon } from \"@heroicons/react/outline\";\r\n\r\nfunction Blank() {\r\n  return (\r\n    <div className=\"hidden md:flex-1 md:grid place-items-center\">\r\n      <ChatAlt2Icon className=\"h-60 text-gray-500\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Blank;\r\n","import React from \"react\";\r\n\r\nfunction Message({ user, sender, message }) {\r\n  return (\r\n    <div\r\n      className={`max-w-2xl p-4 rounded-3xl my-3 ${\r\n        sender.id === user.id ? \"ml-auto bg-blue-500\" : \"mr-auto bg-gray-100\"\r\n      }`}\r\n    >\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","export const ADD_CHATS = \"ADD_CHATS\";\r\nexport const ADD_USER = \"ADD_USER\";\r\nexport const OPEN_CHAT = \"OPEN_CHAT\";\r\nexport const CLOSE_CHAT = \"CLOSE_CHAT\";\r\nexport const ADD_MESSAGE = \"ADD_MESSAGE\";\r\nexport const NEW_CHAT = \"NEW_CHAT\";\r\n","import { PhoneIcon, VideoCameraIcon } from \"@heroicons/react/solid\";\r\nimport { ExclamationCircleIcon } from \"@heroicons/react/outline\";\r\nimport {\r\n  CameraIcon,\r\n  PhotographIcon,\r\n  MicrophoneIcon,\r\n  EmojiHappyIcon,\r\n  ChevronDoubleRightIcon,\r\n  ArrowCircleLeftIcon,\r\n} from \"@heroicons/react/solid\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Message from \"./Message\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { closeChat, addMessage } from \"../redux/actionCreators\";\r\n\r\nfunction ChatScreen({ chatID, messages, user, opened, user2 }) {\r\n  const messageRef = useRef(null);\r\n  const [wsclient, setWsClient] = useState(null);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const client = new WebSocket(\r\n      \"ws://\" + window.location.host + \"/ws/chat/\" + chatID + \"/\"\r\n    );\r\n    client.removeEventListener(onmessage, receiveMessage);\r\n    client.onmessage = receiveMessage;\r\n\r\n    setWsClient(client);\r\n  }, [chatID]);\r\n\r\n  const receiveMessage = (event) => {\r\n    console.log(event.data);\r\n    console.log(typeof event.data);\r\n    console.log(JSON.parse(event.data).message);\r\n    dispatch(addMessage({ chatID, message: JSON.parse(event.data).message }));\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (messageRef.current.value !== \"\") {\r\n      wsclient.send(\r\n        JSON.stringify({\r\n          message: messageRef.current.value,\r\n        })\r\n      );\r\n      messageRef.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  const handleInputEnter = (e) => {\r\n    if (e.keyCode === 13) {\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`flex-1 pr-4 ${!opened && \"hidden\"}`}>\r\n      <div className=\"flex flex-col h-screen relative\">\r\n        <div className=\"flex items-center p-2 h-20 bg-white\">\r\n          <ArrowCircleLeftIcon\r\n            onClick={() => dispatch(closeChat(chatID))}\r\n            className=\"blueIcon ml-3\"\r\n          />\r\n          <h1 className=\"mx-auto font-bold text-2xl\">{user2.email}'s chat</h1>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <PhoneIcon className=\"blueIcon\" />\r\n            <VideoCameraIcon className=\"blueIcon\" />\r\n            <ExclamationCircleIcon className=\"blueIcon\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"flex-1 flex flex-col-reverse overflow-y-scroll scrollbar-hide\">\r\n          {messages.length > 0 &&\r\n            messages.map((message) => (\r\n              <Message\r\n                key={message.id}\r\n                user={user}\r\n                sender={message.user}\r\n                message={message.message}\r\n              />\r\n            ))}\r\n        </div>\r\n        <div className=\"flex h-16 items-center space-x-3 px-2\">\r\n          <div className=\"flex-1 flex items-center bg-gray-100 h-12 rounded-3xl px-3\">\r\n            <input\r\n              className=\"outline-none bg-transparent flex-1\"\r\n              type=\"text\"\r\n              ref={messageRef}\r\n              onKeyDown={handleInputEnter}\r\n              placeholder=\"Type your message here\"\r\n            />\r\n            <ChevronDoubleRightIcon\r\n              onClick={sendMessage}\r\n              className=\"blueIcon\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex space-x-2\">\r\n            <CameraIcon className=\"blueIcon\" />\r\n            <PhotographIcon className=\"blueIcon\" />\r\n            <MicrophoneIcon className=\"blueIcon\" />\r\n            <EmojiHappyIcon className=\"blueIcon\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatScreen;\r\n","import {\r\n  ADD_CHATS,\r\n  ADD_USER,\r\n  OPEN_CHAT,\r\n  CLOSE_CHAT,\r\n  ADD_MESSAGE,\r\n  NEW_CHAT,\r\n} from \"./actionTypes\";\r\n\r\nexport function addChats(chats) {\r\n  return {\r\n    type: ADD_CHATS,\r\n    payload: chats.map((chat) => ({ ...chat, open: false })),\r\n  };\r\n}\r\n\r\nexport function addUser(user) {\r\n  return { type: ADD_USER, payload: user };\r\n}\r\n\r\nexport const openChat = (id) => ({\r\n  type: OPEN_CHAT,\r\n  payload: id,\r\n});\r\nexport const closeChat = (id) => ({\r\n  type: CLOSE_CHAT,\r\n  payload: id,\r\n});\r\nexport const addMessage = ({ chatID, message }) => ({\r\n  type: ADD_MESSAGE,\r\n  payload: { chatID, message },\r\n});\r\nexport const newChat = (chat) => ({\r\n  type: NEW_CHAT,\r\n  payload: chat,\r\n});\r\n","function getCookie(name) {\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== \"\") {\r\n    const cookies = document.cookie.split(\";\");\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      // Does this cookie string begin with the name we want?\r\n      if (cookie.substring(0, name.length + 1) === name + \"=\") {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nexport { getCookie };\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { openChat } from \"../redux/actionCreators\";\r\n\r\nfunction Chat({ username, image, message, id }) {\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <div\r\n      onClick={() => dispatch(openChat(id))}\r\n      className=\"flex items-center space-x-3 p-1 my-4 transform transition duration-500 ease-in-out hover:scale-105 cursor-pointer\"\r\n    >\r\n      <img\r\n        className=\"h-16 w-16 rounded-full object-cover\"\r\n        src={image}\r\n        alt=\"Profile Pic\"\r\n      />\r\n      <div className=\"truncate overflow-hidden\">\r\n        <h1 className=\"font-bold text-xl\">{username}</h1>\r\n        <p className=\"text-lg text-gray-500 truncate\">{message}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import { PlusCircleIcon, SearchIcon } from \"@heroicons/react/outline\";\r\nimport React from \"react\";\r\nimport { getCookie } from \"../util/cookies\";\r\nimport Chat from \"./Chat\";\r\nimport { newChat } from \"../redux/actionCreators\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nfunction Sidebar({ chats, user, openedChat }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleAddChat = async () => {\r\n    const username = prompt(\"Write user's username you wanna chat with\");\r\n\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n\r\n    const request = new Request(\"/new_chat\", {\r\n      headers: { \"X-CSRFToken\": csrftoken },\r\n    });\r\n\r\n    await fetch(request, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: username,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((response) => {\r\n        if (response.error) alert(response.error);\r\n        else {\r\n          console.log(response.message);\r\n          dispatch(newChat(response.chat));\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`px-4 ${\r\n        openedChat ? \"hidden\" : \"flex\"\r\n      } md:flex flex-col w-full md:max-w-[400px] lg:min-w-[500px] h-screen`}\r\n    >\r\n      <div className=\"flex justify-between p-2 rounded-b-2xl h-20 items-center\">\r\n        <a href=\"/logout\">\r\n          <img\r\n            src={user?.image}\r\n            alt=\"User's profile\"\r\n            className=\"h-14 w-14 rounded-full object-cover\"\r\n          />\r\n        </a>\r\n        <h1 className=\"font-bold text-2xl\">{user?.email}</h1>\r\n        <PlusCircleIcon onClick={handleAddChat} className=\"blueIcon\" />\r\n      </div>\r\n      <div className=\"flex items-center mt-2 p-2 h-15 shadow-lg rounded-xl w-full space-x-2\">\r\n        <SearchIcon className=\"h-6 text-gray-400\" />\r\n        <input\r\n          placeholder=\"Search Messages\"\r\n          type=\"text\"\r\n          className=\"h-8 w-full outline-none text-lg\"\r\n        />\r\n      </div>\r\n      <div className=\"flex-1 overflow-y-scroll scrollbar-hide\">\r\n        {chats.length > 0 &&\r\n          Object.keys(user) &&\r\n          chats.map((chat) => {\r\n            //User2 data\r\n            const { username, image } =\r\n              chat.user1.id === user.id ? chat.user2 : chat.user1;\r\n            const message = chat.messages[0]?.message || null;\r\n            return (\r\n              <Chat\r\n                key={chat.id}\r\n                id={chat.id}\r\n                username={username}\r\n                image={image}\r\n                message={message}\r\n              />\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import { useDispatch, useSelector } from \"react-redux\";\nimport Blank from \"./components/Blank\";\nimport ChatScreen from \"./components/ChatScreen\";\nimport Sidebar from \"./components/Sidebar\";\nimport { addChats, addUser } from \"./redux/actionCreators\";\nimport { useEffect } from \"react\";\n\nfunction App() {\n  const chats = useSelector((state) => state.chats);\n  const user = useSelector((state) => state.user);\n  const openedChat = useSelector((state) =>\n    Boolean(state.chats.filter((chat) => chat.open).length)\n  );\n\n  const dispatch = useDispatch();\n  console.log(openedChat);\n\n  useEffect(() => {\n    fetch(`${process.env.REACT_APP_API_URL}/chats`)\n      .then((res) => res.json())\n      .then((chats) => {\n        dispatch(addChats(chats));\n      });\n\n    fetch(`${process.env.REACT_APP_API_URL}/user`)\n      .then((res) => res.json())\n      .then((user) => {\n        dispatch(addUser(user));\n      });\n    console.log(\"Calling use effect\");\n  }, []);\n\n  return (\n    <div className=\"flex\">\n      <Sidebar openedChat={openedChat} user={user} chats={chats} />\n\n      {Boolean(chats?.length) &&\n        chats.map((chat) => {\n          const user2 = chat.user1.id === user.id ? chat.user2 : chat.user1;\n          return (\n            <ChatScreen\n              chatID={chat.id}\n              opened={chat.open}\n              user={user}\n              user2={user2}\n              messages={chat.messages}\n            />\n          );\n        })}\n      {!openedChat && <Blank />}\n    </div>\n  );\n}\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/messenger.54e2c7f7.png\";","import React, { useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport logo from \"./images/messenger.png\";\r\nimport { getCookie } from \"./util/cookies\";\r\n\r\nfunction Login() {\r\n  const history = useHistory();\r\n  const [message, setMessage] = useState(\"\");\r\n  const usernameRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n\r\n  const handleFormSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n    console.log(process.env.REACT_APP_API_URL);\r\n\r\n    const request = new Request(`${process.env.REACT_APP_API_URL}/login`, {\r\n      headers: { \"X-CSRFToken\": csrftoken },\r\n    });\r\n\r\n    const res = await fetch(request, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: usernameRef.current.value,\r\n        password: passwordRef.current.value,\r\n      }),\r\n    });\r\n\r\n    const redirect = (await res).redirected;\r\n    const response = await res;\r\n    console.log(response, redirect);\r\n\r\n    if (redirect) history.push(\"/\");\r\n    else {\r\n      const data = (await res).json();\r\n      setMessage((await data).message);\r\n      usernameRef.current.value = \"\";\r\n      passwordRef.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex\">\r\n      <div className=\"hidden md:grid w-2/5 h-screen place-items-center\">\r\n        <img className=\"h-80 w-80\" src={logo} alt=\"Messenger Logo\" />\r\n      </div>\r\n      <div className=\"w-full md:w-1/2 h-screen flex items-center p-5 md:p-20\">\r\n        <div className=\"w-full\">\r\n          <form\r\n            className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\"\r\n            method=\"post\"\r\n            action=\"/login\"\r\n            onSubmit={handleFormSubmit}\r\n          >\r\n            <p className=\"text-red-500 text-xs md:text-base italic\">\r\n              {message}\r\n            </p>\r\n            <div className=\"mb-4\">\r\n              <label\r\n                className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                htmlFor=\"username\"\r\n              >\r\n                Username\r\n              </label>\r\n              <input\r\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                autoFocus\r\n                id=\"username\"\r\n                ref={usernameRef}\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n              />\r\n            </div>\r\n            <div className=\"mb-6\">\r\n              <label\r\n                className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                htmlFor=\"password\"\r\n              >\r\n                Password\r\n              </label>\r\n              <input\r\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                id=\"password\"\r\n                type=\"password\"\r\n                ref={passwordRef}\r\n                placeholder=\"******************\"\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center justify-between\">\r\n              <input\r\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n                type=\"submit\"\r\n                value=\"Sign In\"\r\n              />\r\n              <a\r\n                className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\"\r\n                href=\"/register\"\r\n              >\r\n                Sign Up\r\n              </a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport logo from \"./images/messenger.png\";\r\nimport { getCookie } from \"./util/cookies\";\r\n\r\nfunction Register() {\r\n  const history = useHistory();\r\n  const [message, setMessage] = useState(\"\");\r\n  const usernameRef = useRef(null);\r\n  const emailRef = useRef(null);\r\n  const imageRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n  const confirmationRef = useRef(null);\r\n\r\n  const handleFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n\r\n    const request = new Request(`${process.env.REACT_APP_API_URL}/register`, {\r\n      headers: { \"X-CSRFToken\": csrftoken },\r\n    });\r\n\r\n    fetch(request, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: usernameRef.current.value,\r\n        email: emailRef.current.value,\r\n        image: imageRef.current.value,\r\n        password: passwordRef.current.value,\r\n        confirmation: confirmationRef.current.value,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        // If wasn't redirected to index something went wrong.\r\n        if (res.redirected) history.push(\"/\");\r\n        else return res.json();\r\n      })\r\n      .then((response) => {\r\n        if (response.message) setMessage(response.message);\r\n        usernameRef.current.value = \"\";\r\n        emailRef.current.value = \"\";\r\n        passwordRef.current.value = \"\";\r\n        confirmationRef.current.value = \"\";\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex\">\r\n        <div className=\"hidden md:grid w-2/5 h-screen place-items-center\">\r\n          <img className=\"h-80 w-80\" src={logo} alt=\"Messenger Logo\" />\r\n        </div>\r\n        <div className=\"w-full md:w-1/2 h-screen flex items-center p-5 md:p-20\">\r\n          <div className=\"w-full\">\r\n            <form\r\n              className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\"\r\n              onSubmit={handleFormSubmit}\r\n            >\r\n              <p className=\"text-red-500 text-xs md:text-base italic\">\r\n                {message}\r\n              </p>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"username\"\r\n                >\r\n                  Username\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  autoFocus\r\n                  id=\"username\"\r\n                  ref={usernameRef}\r\n                  type=\"text\"\r\n                  placeholder=\"Username\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"email\"\r\n                >\r\n                  Email Address\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"email\"\r\n                  ref={emailRef}\r\n                  type=\"email\"\r\n                  placeholder=\"Email Address\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"imageUrl\"\r\n                >\r\n                  Image Url\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"imageUrl\"\r\n                  ref={imageRef}\r\n                  type=\"text\"\r\n                  placeholder=\"Image Url\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"password\"\r\n                >\r\n                  Password\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"password\"\r\n                  ref={passwordRef}\r\n                  type=\"password\"\r\n                  placeholder=\"******************\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-6\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"confirmation\"\r\n                >\r\n                  Confirm Password\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"confirmation\"\r\n                  type=\"password\"\r\n                  ref={confirmationRef}\r\n                  placeholder=\"******************\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center justify-between\">\r\n                <input\r\n                  className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n                  type=\"submit\"\r\n                  value=\"Sign Up\"\r\n                />\r\n                <div>\r\n                  Already have an account? {\"   \"}\r\n                  <a\r\n                    className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\"\r\n                    href=\"/login\"\r\n                  >\r\n                    Sign In\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\n\r\nfunction Main() {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={App} />\r\n        <Route exact path=\"/login\" component={Login} />\r\n        <Route exact path=\"/register\" component={Register} />\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import { combineReducers } from \"redux\";\r\nimport {\r\n  ADD_CHATS,\r\n  ADD_USER,\r\n  OPEN_CHAT,\r\n  CLOSE_CHAT,\r\n  ADD_MESSAGE,\r\n  NEW_CHAT,\r\n} from \"./actionTypes\";\r\n\r\nexport const chatsReducer = (state = [], action) => {\r\n  switch (action.type) {\r\n    case ADD_CHATS:\r\n      return action.payload;\r\n    case OPEN_CHAT:\r\n      return state.map((chat) =>\r\n        chat.id === action.payload\r\n          ? { ...chat, open: true }\r\n          : { ...chat, open: false }\r\n      );\r\n    case CLOSE_CHAT:\r\n      return state.map((chat) =>\r\n        chat.id === action.payload ? { ...chat, open: false } : chat\r\n      );\r\n    case ADD_MESSAGE:\r\n      const tempChats = state.filter(\r\n        (chat) => chat.id !== action.payload.chatID\r\n      );\r\n      const oudatedChat = state.filter(\r\n        (chat) => chat.id === action.payload.chatID\r\n      )[0];\r\n      const updatedChat = {\r\n        ...oudatedChat,\r\n        messages: [action.payload.message, ...oudatedChat.messages],\r\n      };\r\n      return [updatedChat, ...tempChats];\r\n    case NEW_CHAT:\r\n      return [action.payload, ...state];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst userReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case ADD_USER:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst reducer = combineReducers({\r\n  user: userReducer,\r\n  chats: chatsReducer,\r\n});\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport reducer from \"./reducers\";\r\nimport thunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Main from \"./Main\";\nimport store from \"./redux/store\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Main />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}