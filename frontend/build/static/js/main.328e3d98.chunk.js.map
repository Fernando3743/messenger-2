{"version":3,"sources":["components/Blank.js","components/Message.js","components/ChatScreen.js","util/cookies.js","components/Chat.js","components/Sidebar.js","App.js","images/messenger.png","Login.js","Register.js","Main.js","index.js"],"names":["Blank","className","Message","user","sender","message","id","ChatScreen","chatID","messages","user2","opened","fetchChats","setOpenedChat","messageRef","useRef","useState","wsclient","setWsClient","useEffect","client","WebSocket","window","location","host","removeEventListener","onmessage","sendMessage","send","JSON","stringify","current","value","onClick","email","length","map","type","ref","onKeyDown","e","keyCode","placeholder","getCookie","name","cookieValue","document","cookie","cookies","split","i","trim","substring","decodeURIComponent","Chat","username","image","openChat","src","alt","Sidebar","chats","openedChat","handleAddChat","a","prompt","csrftoken","request","Request","headers","fetch","method","body","then","res","json","response","error","alert","console","log","href","chat","user1","App","setUser","setUser2","setChats","Boolean","Object","keys","tempUser2","Login","history","useHistory","setMessage","usernameRef","passwordRef","logo","action","onSubmit","preventDefault","password","redirected","push","htmlFor","autoFocus","Register","emailRef","imageRef","confirmationRef","confirmation","Main","exact","path","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.328e3d98.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { ChatAlt2Icon } from \"@heroicons/react/outline\";\r\n\r\nfunction Blank() {\r\n  return (\r\n    <div className=\"hidden md:flex-1 md:grid place-items-center\">\r\n      <ChatAlt2Icon className=\"h-60 text-gray-500\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Blank;\r\n","import React from \"react\";\r\n\r\nfunction Message({ user, sender, message }) {\r\n  return (\r\n    <div\r\n      className={`max-w-2xl p-4 rounded-3xl my-3 ${\r\n        sender.id === user.id ? \"ml-auto bg-blue-500\" : \"mr-auto bg-gray-100\"\r\n      }`}\r\n    >\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import { PhoneIcon, VideoCameraIcon } from \"@heroicons/react/solid\";\r\nimport { ExclamationCircleIcon } from \"@heroicons/react/outline\";\r\nimport {\r\n  CameraIcon,\r\n  PhotographIcon,\r\n  MicrophoneIcon,\r\n  EmojiHappyIcon,\r\n  ChevronDoubleRightIcon,\r\n  ArrowCircleLeftIcon,\r\n} from \"@heroicons/react/solid\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Message from \"./Message\";\r\n\r\nfunction ChatScreen({\r\n  chatID,\r\n  messages,\r\n  user,\r\n  user2,\r\n  opened,\r\n  fetchChats,\r\n  setOpenedChat,\r\n}) {\r\n  const messageRef = useRef(null);\r\n  const [wsclient, setWsClient] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const client = new WebSocket(\r\n      \"ws://\" + window.location.host + \"/ws/chat/\" + chatID + \"/\"\r\n    );\r\n    client.removeEventListener(onmessage, fetchChats);\r\n    client.onmessage = fetchChats;\r\n\r\n    setWsClient(client);\r\n  }, [chatID]);\r\n\r\n  const sendMessage = () => {\r\n    wsclient.send(\r\n      JSON.stringify({\r\n        message: messageRef.current.value,\r\n      })\r\n    );\r\n    messageRef.current.value = \"\";\r\n  };\r\n\r\n  const handleInputEnter = (e) => {\r\n    if (e.keyCode === 13) {\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`flex-1 pr-4 ${!opened && \"hidden\"}`}>\r\n      <div className=\"flex flex-col h-screen relative\">\r\n        <div className=\"flex items-center p-2 h-20 bg-white\">\r\n          <ArrowCircleLeftIcon\r\n            onClick={() => setOpenedChat({})}\r\n            className=\"blueIcon ml-3\"\r\n          />\r\n          <h1 className=\"mx-auto font-bold text-2xl\">{user2.email}'s chat</h1>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <PhoneIcon className=\"blueIcon\" />\r\n            <VideoCameraIcon className=\"blueIcon\" />\r\n            <ExclamationCircleIcon className=\"blueIcon\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"flex-1 flex flex-col-reverse overflow-y-scroll scrollbar-hide\">\r\n          {messages.length > 0 &&\r\n            messages.map((message) => (\r\n              <Message\r\n                key={message.id}\r\n                user={user}\r\n                sender={message.user}\r\n                message={message.message}\r\n              />\r\n            ))}\r\n        </div>\r\n        <div className=\"flex h-16 items-center space-x-3 px-2\">\r\n          <div className=\"flex-1 flex items-center bg-gray-100 h-12 rounded-3xl px-3\">\r\n            <input\r\n              className=\"outline-none bg-transparent flex-1\"\r\n              type=\"text\"\r\n              ref={messageRef}\r\n              onKeyDown={handleInputEnter}\r\n              placeholder=\"Type your message here\"\r\n            />\r\n            <ChevronDoubleRightIcon\r\n              onClick={sendMessage}\r\n              className=\"blueIcon\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex space-x-2\">\r\n            <CameraIcon className=\"blueIcon\" />\r\n            <PhotographIcon className=\"blueIcon\" />\r\n            <MicrophoneIcon className=\"blueIcon\" />\r\n            <EmojiHappyIcon className=\"blueIcon\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatScreen;\r\n","function getCookie(name) {\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== \"\") {\r\n    const cookies = document.cookie.split(\";\");\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      // Does this cookie string begin with the name we want?\r\n      if (cookie.substring(0, name.length + 1) === name + \"=\") {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nexport { getCookie };\r\n","import React from \"react\";\r\n\r\nfunction Chat({ username, image, message, id, openChat }) {\r\n  return (\r\n    <div\r\n      onClick={() => openChat(id)}\r\n      className=\"flex items-center space-x-3 p-1 my-4 transform transition duration-500 ease-in-out hover:scale-105 cursor-pointer\"\r\n    >\r\n      <img\r\n        className=\"h-16 w-16 rounded-full object-cover\"\r\n        src={image}\r\n        alt=\"Profile Pic\"\r\n      />\r\n      <div className=\"truncate overflow-hidden\">\r\n        <h1 className=\"font-bold text-xl\">{username}</h1>\r\n        <p className=\"text-lg text-gray-500 truncate\">{message}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import {\r\n  AdjustmentsIcon,\r\n  PlusCircleIcon,\r\n  SearchIcon,\r\n} from \"@heroicons/react/outline\";\r\nimport React from \"react\";\r\nimport { getCookie } from \"../util/cookies\";\r\nimport Chat from \"./Chat\";\r\n\r\nfunction Sidebar({ chats, user, openChat, openedChat, fetchChats }) {\r\n  const handleAddChat = async () => {\r\n    const username = prompt(\"Write user's username you wanna chat with\");\r\n\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n\r\n    const request = new Request(\"/new_chat\", {\r\n      headers: { \"X-CSRFToken\": csrftoken },\r\n    });\r\n\r\n    await fetch(request, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: username,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((response) => {\r\n        if (response.error) alert(response.error);\r\n        else {\r\n          console.log(response.message);\r\n          fetchChats();\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`px-4 ${\r\n        openedChat ? \"hidden\" : \"flex\"\r\n      } md:flex flex-col w-full md:max-w-[400px] lg:min-w-[500px] h-screen`}\r\n    >\r\n      <div className=\"flex justify-between p-2 rounded-b-2xl h-20 items-center\">\r\n        <a href=\"/logout\">\r\n          <img\r\n            src={user.image}\r\n            alt=\"User's profile\"\r\n            className=\"h-14 w-14 rounded-full object-cover\"\r\n          />\r\n        </a>\r\n        <h1 className=\"font-bold text-2xl\">Messages</h1>\r\n        <PlusCircleIcon onClick={handleAddChat} className=\"blueIcon\" />\r\n      </div>\r\n      <div className=\"flex items-center mt-2 p-2 h-15 shadow-lg rounded-xl w-full space-x-2\">\r\n        <SearchIcon className=\"h-6 text-gray-400\" />\r\n        <input\r\n          placeholder=\"Search Messages\"\r\n          type=\"text\"\r\n          className=\"h-8 w-full outline-none text-lg\"\r\n        />\r\n      </div>\r\n      <div className=\"flex-1 overflow-y-scroll scrollbar-hide\">\r\n        {chats.map((chat) => {\r\n          const { username, image, id } =\r\n            chat.user1.id === user.id ? chat.user2 : chat.user1;\r\n          const message = chat.messages[0]?.message || null;\r\n          return (\r\n            <Chat\r\n              key={id}\r\n              id={id}\r\n              username={username}\r\n              image={image}\r\n              message={message}\r\n              openChat={openChat}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import { useEffect, useState } from \"react\";\nimport Blank from \"./components/Blank\";\nimport ChatScreen from \"./components/ChatScreen\";\nimport Sidebar from \"./components/Sidebar\";\n\nfunction App() {\n  const [user, setUser] = useState({});\n  const [user2, setUser2] = useState({});\n  const [chats, setChats] = useState([]);\n  const [openedChat, setOpenedChat] = useState({});\n\n  useEffect(() => {\n    //Fetching the logged user\n    fetch(\"/user\")\n      .then((res) => {\n        return res.json();\n      })\n      .then((response) => {\n        setUser(response);\n      });\n    //Fetching the chats\n    fetch(\"/chats\")\n      .then((res) => res.json())\n      .then((response) => {\n        setChats(response);\n      });\n  }, []);\n\n  const fetchChats = async () => {\n    fetch(\"/chats\")\n      .then((res) => res.json())\n      .then((response) => {\n        setChats(response);\n      });\n  };\n\n  const openChat = (id) => {\n    let chat = {};\n    setOpenedChat(chat);\n    for (let i = 0; i < chats.length; i++) {\n      if (chats[i].user1.id === id || chats[i].user2.id === id) {\n        chat = chats[i];\n        break;\n      }\n    }\n    const tempUser2 = chat.user1.id === user.id ? chat.user2 : chat.user1;\n    setUser2(tempUser2);\n    setOpenedChat(chat);\n  };\n\n  return (\n    <div className=\"flex\">\n      <Sidebar\n        fetchChats={fetchChats}\n        openedChat={Boolean(Object.keys(openedChat).length)}\n        user={user}\n        chats={chats}\n        openChat={openChat}\n      />\n      {Object.keys(openedChat).length ? (\n        chats.map((chat) => {\n          const opened = openedChat.id === chat.id;\n          return (\n            <ChatScreen\n              setOpenedChat={setOpenedChat}\n              fetchChats={fetchChats}\n              opened={opened}\n              chatID={chat.id}\n              user={user}\n              user2={user2}\n              messages={chat.messages}\n            />\n          );\n        })\n      ) : (\n        <Blank />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/messenger.54e2c7f7.png\";","import React, { useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport logo from \"./images/messenger.png\";\r\nimport { getCookie } from \"./util/cookies\";\r\n\r\nfunction Login() {\r\n  const history = useHistory();\r\n  const [message, setMessage] = useState(\"\");\r\n  const usernameRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n\r\n  const handleFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n\r\n    const request = new Request(\"/login\", {\r\n      headers: { \"X-CSRFToken\": csrftoken },\r\n    });\r\n\r\n    fetch(request, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: usernameRef.current.value,\r\n        password: passwordRef.current.value,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        // If wasn't redirected to index something went wrong.\r\n        if (res.redirected) history.push(\"/\");\r\n        else return res.json();\r\n      })\r\n      .then((response) => {\r\n        if (response) {\r\n          setMessage(response.message);\r\n          usernameRef.current.value = \"\";\r\n          passwordRef.current.value = \"\";\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex\">\r\n      <div className=\"hidden md:grid w-2/5 h-screen place-items-center\">\r\n        <img className=\"h-80 w-80\" src={logo} alt=\"Messenger Logo\" />\r\n      </div>\r\n      <div className=\"w-full md:w-1/2 h-screen flex items-center p-5 md:p-20\">\r\n        <div className=\"w-full\">\r\n          <form\r\n            className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\"\r\n            method=\"post\"\r\n            action=\"/login\"\r\n            onSubmit={handleFormSubmit}\r\n          >\r\n            <p className=\"text-red-500 text-xs md:text-base italic\">\r\n              {message}\r\n            </p>\r\n            <div className=\"mb-4\">\r\n              <label\r\n                className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                htmlFor=\"username\"\r\n              >\r\n                Username\r\n              </label>\r\n              <input\r\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                autoFocus\r\n                id=\"username\"\r\n                ref={usernameRef}\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n              />\r\n            </div>\r\n            <div className=\"mb-6\">\r\n              <label\r\n                className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                htmlFor=\"password\"\r\n              >\r\n                Password\r\n              </label>\r\n              <input\r\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                id=\"password\"\r\n                type=\"password\"\r\n                ref={passwordRef}\r\n                placeholder=\"******************\"\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center justify-between\">\r\n              <input\r\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n                type=\"submit\"\r\n                value=\"Sign In\"\r\n              />\r\n              <a\r\n                className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\"\r\n                href=\"/register\"\r\n              >\r\n                Sign Up\r\n              </a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport logo from \"./images/messenger.png\";\r\nimport { getCookie } from \"./util/cookies\";\r\n\r\nfunction Register() {\r\n  const history = useHistory();\r\n  const [message, setMessage] = useState(\"\");\r\n  const usernameRef = useRef(null);\r\n  const emailRef = useRef(null);\r\n  const imageRef = useRef(null);\r\n  const passwordRef = useRef(null);\r\n  const confirmationRef = useRef(null);\r\n\r\n  const handleFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n\r\n    const request = new Request(\"/register\", {\r\n      headers: { \"X-CSRFToken\": csrftoken },\r\n    });\r\n\r\n    fetch(request, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        username: usernameRef.current.value,\r\n        email: emailRef.current.value,\r\n        image: imageRef.current.value,\r\n        password: passwordRef.current.value,\r\n        confirmation: confirmationRef.current.value,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        // If wasn't redirected to index something went wrong.\r\n        if (res.redirected) history.push(\"/\");\r\n        else return res.json();\r\n      })\r\n      .then((response) => {\r\n        if (response.message) setMessage(response.message);\r\n        usernameRef.current.value = \"\";\r\n        emailRef.current.value = \"\";\r\n        passwordRef.current.value = \"\";\r\n        confirmationRef.current.value = \"\";\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex\">\r\n        <div className=\"hidden md:grid w-2/5 h-screen place-items-center\">\r\n          <img className=\"h-80 w-80\" src={logo} alt=\"Messenger Logo\" />\r\n        </div>\r\n        <div className=\"w-full md:w-1/2 h-screen flex items-center p-5 md:p-20\">\r\n          <div className=\"w-full\">\r\n            <form\r\n              className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\"\r\n              onSubmit={handleFormSubmit}\r\n            >\r\n              <p className=\"text-red-500 text-xs md:text-base italic\">\r\n                {message}\r\n              </p>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"username\"\r\n                >\r\n                  Username\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  autoFocus\r\n                  id=\"username\"\r\n                  ref={usernameRef}\r\n                  type=\"text\"\r\n                  placeholder=\"Username\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"email\"\r\n                >\r\n                  Email Address\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"email\"\r\n                  ref={emailRef}\r\n                  type=\"email\"\r\n                  placeholder=\"Email Address\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"imageUrl\"\r\n                >\r\n                  Image Url\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"imageUrl\"\r\n                  ref={imageRef}\r\n                  type=\"text\"\r\n                  placeholder=\"Image Url\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"password\"\r\n                >\r\n                  Password\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"password\"\r\n                  ref={passwordRef}\r\n                  type=\"password\"\r\n                  placeholder=\"******************\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-6\">\r\n                <label\r\n                  className=\"block text-gray-700 text-sm md:text-lg font-bold mb-2\"\r\n                  htmlFor=\"confirmation\"\r\n                >\r\n                  Confirm Password\r\n                </label>\r\n                <input\r\n                  className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\r\n                  id=\"confirmation\"\r\n                  type=\"password\"\r\n                  ref={confirmationRef}\r\n                  placeholder=\"******************\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center justify-between\">\r\n                <input\r\n                  className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n                  type=\"submit\"\r\n                  value=\"Sign Up\"\r\n                />\r\n                <div>\r\n                  Already have an account? {\"   \"}\r\n                  <a\r\n                    className=\"inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800\"\r\n                    href=\"/login\"\r\n                  >\r\n                    Sign In\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useParams,\r\n} from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\n\r\nfunction Main() {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={App} />\r\n        <Route exact path=\"/login\" component={Login} />\r\n        <Route exact path=\"/register\" component={Register} />\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Main from \"./Main\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Main />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}